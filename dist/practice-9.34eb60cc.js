var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},i=t.parcelRequirebf94;null==i&&((i=function(t){if(t in e)return e[t].exports;if(t in n){var i=n[t];delete n[t];var r={id:t,exports:{}};return e[t]=r,i.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){n[t]=e},t.parcelRequirebf94=i);var r=i("5f3O5"),s=i("38CtI");class a{#t=[];#e=[];constructor(...t){this.#t=t[0].x||t[0].x||t[0],this.#e=t[0].y||t[0].y||t[1]}set rx(t){if("object"!=typeof t)return console.error("Type Error: Parameter type must be an array");this.#t=t}get rx(){return this.#t}set ry(t){if("object"!=typeof t)return console.error("Type Error: Parameter type must be an array");this.#e=t}get ry(){return this.#e}getS(){const t=[...this.mapRangsToArray()].sort(((t,e)=>t[0]-e[0])),e={};return t.forEach(((n,i)=>{const[r,s]=n;e[i]=0;for(let n=i+1;n<t.length;n++){const[a,o]=t[n];e[i]+=this.getV(this.getRangs(this.#t).object,this.getRangs(this.#e).object,r,s,a,o)}})),Object.values(e).reduce(((t,e)=>t+e),0)}getV(t,e,n,i,r,s){return this.isBundlesExists(t,e)?i<s&&n!==r?1:i>s&&n!==r?-1:0:i<s?1:-1}isBundlesExists(){let t=this.getRangs(this.#t),e=this.getRangs(this.#e);const n=Object.values(t).some((t=>t.quantity>1)),i=Object.values(e).some((t=>t.quantity>1));return n||i}evaluationKendallCoefficient(){return this.isBundlesExists()?this.evaluationKendallCoefficientWithBundles(this.getS(),this.getRangs(this.#t).object,this.getRangs(this.#e).object,this.getRangs(this.#t).result,this.getRangs(this.#e).result):this.evaluationKendallCoefficientWithoutBundles(this.getS(),this.getRangs(this.#t).result)}evaluationKendallCoefficientWithoutBundles(t,e){const n=e.length;return 2*t/(n*(n-1))}evaluationKendallCoefficientWithBundles(t,e,n,i,r){const s=i.length,a=this.getCurrentCalcsCD(e),o=this.getCurrentCalcsCD(n);return console.log(t),t/Math.sqrt((.5*s*(s-1)-a)*(.5*s*(s-1)-o))}getCurrentCalcsCD(t){t=Object.values(t),console.log(t);return t.filter((t=>t.quantity>1)).reduce(((t,{quantity:e})=>t+e*(e-1)),0)/2}getStatisticU(){const t=this.#t.length;return 3*this.evaluationKendallCoefficient(this.getRangs(this.#t).object,this.getRangs(this.#e).object,this.getRangs(this.#t).result,this.getRangs(this.#e).result,this.getS())*Math.sqrt(t*(t-1))/Math.sqrt(2*(2*t+5))}evaluationSpearmanCoefficient(){return this.isBundlesExists()?this.evaluationSpearmanCoefficientWithBundles():this.evaluationSpearmanCoefficientWithoutBundles()}getStatisticT(){const t=this.#t.length;return this.evaluationSpearmanCoefficient()*Math.sqrt(t-2)/Math.sqrt(1-Math.pow(this.evaluationSpearmanCoefficient(),2))}getSquareDiffRangs(){return this.mapRangsToArray().reduce(((t,[e,n])=>t+Math.pow(e-n,2)),0)}evaluationSpearmanCoefficientWithBundles(){let t=this.getRangs(this.#t).result,e=this.getRangs(this.#e).result,n=this.getSquareDiffRangs();const i=t.length,r=this.getCurrentCalcsAB(t),s=this.getCurrentCalcsAB(e);return(1/6*i*(Math.pow(i,2)-1)-n-r-s)/Math.sqrt((1/6*i*(Math.pow(i,2)-1)-2*r)*(1/6*i*(Math.pow(i,2)-1)-2*s))}evaluationSpearmanCoefficientWithoutBundles(){const t=this.#t.length;let e=this.getSquareDiffRangs();return 1-6/(t*(Math.pow(t,2)-1))*e}getCurrentCalcsAB(t){return(t=Object.values(t)).filter((t=>t.quantity>1)).reduce(((t,{quantity:e})=>t+(Math.pow(e,3)-e)),0)/12}pearsonCorrelation(){return new r.default(this.#t,this.#e).getR()}mapRangsToArray(){const t=[],e=[],n=this.getRangs(this.#t).result,i=this.getRangs(this.#e).result;this.#t.forEach((e=>{t.push(n.find((t=>t.value===e)).index)})),this.#e.forEach((t=>{e.push(i.find((e=>e.value===t)).index)}));return t.map(((t,n)=>[t,e[n]]))}getRangs(t,e={}){const n="object"==typeof t[0]?[...t].sort(((t,e)=>t.value-e.value)):[...t].sort(((t,e)=>t-e));t[0];const i={};n.forEach(((t,e)=>{"object"==typeof t?i.hasOwnProperty(t.value)?i[t.value]={quantity:i[t.value].quantity+1,index:i[t.value].index+e+1,entity:t.entity}:i[t.value]={quantity:1,index:e+1,entity:t.entity}:i.hasOwnProperty(t)?i[t]={quantity:i[t].quantity+1,index:i[t].index+e+1}:i[t]={quantity:1,index:e+1}}));for(const t in i)i[t].quantity>1&&(i[t].index=i[t].index/i[t].quantity);const r=[...t].sort(((t,e)=>t-e)).map((t=>({value:t,index:i[t].index})));return{object:i,result:r}}sortedMappedRangs(){return[...this.mapRangsToArray()].sort(((t,e)=>t[0]-e[0]))}Spearman(){return`\n      <h3>Коефіцієнт рангової кореляції Спірмена</h3>\n      <p>Compared rangs: </p>\n      <table>\n      <tr>${this.sortedMappedRangs().map((t=>`\n              <td>${t[0]}</td>\n          `)).join("")}</tr>\n      <tr>\n      ${this.sortedMappedRangs().map((t=>`\n              <td>${t[1]}</td>\n          `)).join("")}</tr>\n      </table>\n      <p>Square rangs: ${this.getSquareDiffRangs().toFixed(4)}</p>\n      <p>Evaluate τ<sub>c</sub>: ${this.evaluationSpearmanCoefficient().toFixed(4)}</p>\n      <p>Statistic T: ${this.getStatisticT().toFixed(4)}</p>\n      ${Math.abs(this.getStatisticT())<=s.findQuantileS(this.#t.length-2)?`<p>|${this.getStatisticT()}| &le; ${s.findQuantileS(this.#t.length-2)}, <br> коефіцієнт кореляції Спірмена дорівнює нулю  (незначущий),  між  показниками  відсутня  монотонна  залежність.`:`<p>|${this.getStatisticT()}| > ${s.findQuantileS(this.#t.length-2).toFixed(4)}, <br> Коефіцієнт кореляції Спірмена відмінний від нуля і між показниками x та y існує  монотонний  зв’язок</p>`}\n  `}Kendall(){return`\n      <h3>Коефіцієнт рангової кореляції Кендалла</h3>\n      <p>S: ${this.getS().toFixed(4)}</p>\n      <p>Evaluate τ<sub>k</sub>: ${this.evaluationKendallCoefficient().toFixed(4)}</p>\n      <p>Statistic U: ${this.getStatisticU().toFixed(4)}</p>\n      ${Math.abs(this.getStatisticU())<=s.findQuantileU()?`<p>|${this.getStatisticU().toFixed(4)}| &le; ${s.findQuantileU()}, <br> Коефіцієнт  кореляції  вважаємо  таким,  що  дорівнює нулю,  і можемо стверджувати,  що  монотонної  залежності  між  показниками  немає.`:`<p>|${this.getStatisticU().toFixed(4)}| > ${s.findQuantileU().toFixed(4)}, <br> Коефіцієнт кореляції Кендалла відмінний від нуля і між показниками x та y існує  монотонний  зв’язок</p>`}\n  `}print(t){document.querySelector(t).innerHTML=this.Spearman()+this.Kendall()}}function o(t){return t.split(",").filter((t=>""!==t)).map((t=>Number("NaN"==typeof t?0:t)))}!function(){const t=document.querySelector("#submit-input"),e=document.querySelector("#input-file")??null;let n=null;if(null===e)return console.error("fileInput === null");e.addEventListener("change",(t=>{const e=t.target.files[0],i=new FileReader;i.readAsText(e),i.addEventListener("load",(t=>{n=i.result.split("\n").map((t=>t.trim())).map((t=>t.split(/\s+/))),console.log(n),result1=n.map((t=>"NA"==t[0]||"?"==t[0]?0:+t[0])),result2=n.map((t=>"NA"==t[1]||"?"==t[1]?0:+t[1])),n={x:result1,y:result2},document.querySelector("#file-label").innerText=`Loaded: ${e.name}`})),i.onerror=function(){console.log(i.error)}})),t.addEventListener("click",(t=>{const e=document.querySelector("#input-x").value??"",i=document.querySelector("#input-y").value??"",r=null===n?new a(o(e),o(i)):new a(n);console.log(r.evaluationSpearmanCoefficientWithBundles(r.getRangs(r.rx).result,r.getRangs(r.ry).result)),r.print(".list")}))}();
//# sourceMappingURL=practice-9.34eb60cc.js.map
